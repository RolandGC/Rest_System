<!-- Lista de Mesas -->
{% extends 'list.html' %}
{% load static %}
<<<<<<< HEAD

=======
{% block head_body %}
    <link rel="stylesheet" href="{% static 'scm/mesas/css/style.css' %}"/> 
    <script src="{% static 'scm/mesas/js/modal.js' %}"></script>
{% endblock %}
>>>>>>> bd36b4b623b5ae9b7eab3c09f41effa8418e5f1a
{% block content %}
<div class="card contenedor-modal">
    <div class="card-header">
        <h3 class="card-title">
            <i class="fas fa-search"></i>
            Mesas
        </h3>
    </div>
    <div style="margin-top: 20px; margin-left:20px">
        {% if create_url %}
            <a href="/pos/scm/mesa/add" class="btn btn-primary btn-flat">
                <i class="fas fa-plus"></i> Añadir mesa
            </a>
        {% endif %}
    </div>
    <div class="d-flex flex-wrap mx-auto" style="gap:30px 20px;max-width:1000px ;margin-top: 40px; margin-bottom:30px">
        {% for mesa in mesas %}
<<<<<<< HEAD
            <div class="mx-auto">
                <h4 class="text-center">Mesa N° {{ mesa.numero_mesa }}</h4>
                {% if mesa.disponibilidad %}
                    <img src="{% static 'img/mesa-green.png' %}" alt="" width="250">
                {% else %}
                    <img src="{% static 'img/mesa-red.png' %}" alt="" width="250">
                {% endif %}
                <button class="btn btn-primary btn-hacer-pedido" data-mesa-id="{{ mesa.id }}">Hacer Pedido</button>
=======
            <div class="mx-auto card-mesa position-relative" data-mesa-id="{{mesa.numero_mesa}}">
                <h4 class="text-center">Mesa N° {{mesa.numero_mesa}}</h4>
                {% if mesa.disponibilidad %}
                    <img class="card-mesa mx-auto" src="{% static '/img/mesa-green.png' %}" alt="" width="250">
                {% else %}
                    <img class="card-mesa mx-auto" src="{% static '/img/mesa-red.png' %}" alt="" width="250">
                {% endif %}
                <div class="position-absolute d-flex justify-content-center" style="width: 245px; margin: 0 auto;bottom:18px; column-gap:20px">
                    <a href="{% url 'mesa_update' mesa.id %}" data-toggle="tooltip" title="Editar registro" class="btn btn-warning btn-xs btn-flat">
                        <i class="fas fa-edit"></i>
                    </a>
                    <a href="{% url 'mesa_delete' mesa.id %}" rel="delete" data-toggle="tooltip" title="Eliminar registro"
                       class="btn btn-danger btn-xs btn-flat">
                        <i class="fas fa-trash"></i>
                    </a>
                </div>
>>>>>>> bd36b4b623b5ae9b7eab3c09f41effa8418e5f1a
            </div>
        {% endfor %}
    </div>
    
</div>
<<<<<<< HEAD

<!-- Modal para hacer pedido -->
<div class="modal fade" id="modal-pedido" tabindex="-1" aria-labelledby="modal-pedido-label" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modal-pedido-label">Realizar Pedido</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="pedido-content">
                <!-- Contenido del pedido cargado dinámicamente -->
                <form id="pedido-form" method="post">
                    {% csrf_token %}
                    <!-- Aquí se mostrará el contenido del formulario cargado dinámicamente -->
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                <button type="submit" class="btn btn-primary" form="pedido-form">Enviar Pedido</button>
            </div>
        </div>
    </div>
</div>
=======
<section id="myModal" class="modal">
    <div class="modal-contenedor">
        <div class="modal-content">
            <div class="d-flex justify-content-end">
                <button class="close-modal btn btn-danger"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-form">
                <h4>Modal</h4>
            </div>
        </div>
    </div>
</section>
>>>>>>> bd36b4b623b5ae9b7eab3c09f41effa8418e5f1a
{% endblock %}

<!-- JavaScript -->
{% block javascript %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
// Función para cargar dinámicamente el contenido del pedido
function cargarContenidoPedido(mesaId) {
    // Realizar una solicitud AJAX para obtener el contenido del pedido desde la vista MesasOrderView
    $.ajax({
        url: `/scm/mesa/order/${mesaId}/`,
        method: 'POST',
        data: {
            // Aquí puedes enviar cualquier otro dato necesario para crear el pedido
        },
        success: function(response) {
            $('#pedido-content').html(response.form_html);
            $('#modal-pedido').modal('show');
        },
        error: function(xhr, status, error) {
            console.error('Error al cargar el contenido del pedido:', error);
        }
    });
}

// Asociar evento de clic a los botones "Hacer Pedido"
$(document).ready(function() {
    $('.btn-hacer-pedido').click(function() {
        const mesaId = $(this).data('mesa-id');
        cargarContenidoPedido(mesaId);
    });
});
</script>
{% endblock %}z
